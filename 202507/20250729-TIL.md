# 2025 07 29 수업 정리
# java database의 jpa
## 1. JPQL
### - @Query
#### 1) 사용예시 : @Query(value = "SELECT s from Student s WHERE s.city = ?1")
#### 2) 에시와 같이 사용하면 메서드 규칙 안지켜도 작동한다.
## 2. @ManyToOne(fetch = FetchType.LAZY) 
### - 필요없을 때는 조인을 하지 않는 전략
### -  ManyToOne은 무조건 LAZY를 걸어라
## 3. jpa는 하위의 것을 연관관계의 주인으로 설정한다. -> 데이터베이스에는 없는 개념
## 4. 양뱡향은 편의성을 위해 선택하는 것이다.
## 5. 연관관계 필드는 순환참조 방지를 위해 제외해야한다.
### - ex) @ToString(exclude = { "employees" }), @ToString(exclude = {"department"})
## 6. 양방향에서는 ManytoOne에서 변경되면 OnetoMany쪽에서도 수정해야 한다.
### - 실무에서는 메서드로 만들어서 캡슐화 한다.

# sql
## 1. select 문 안의 select문은 결과값이 하나여야 한다.
## 2. 선택관계
### - 예시) 게시물에 꼭 댓글을 안달아도 된다.
## 3. 필수 관계
### - 예시) 사원은 꼭 사원번호가 있어야 한다.
## 4. 서브쿼리
### - 단일 행 서브쿼리 (Single-row Subquery): 단일 행 서브쿼리는 실행 결과가 오직 하나의 행, 하나의 컬럼 (즉, 하나의 값)인 서브쿼리이다.
### - 다중 행 서브쿼리 (Multi-row Subquery): 다중 행 서브쿼리는 실행 결과가 여러 개의 행인 서브쿼리이다.



