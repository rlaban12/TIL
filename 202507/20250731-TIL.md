# 2025 07 31 수업 정리
# JPA
## 1. jpa와 spring jpa와 다른 점
### - jpa: 순수한 jpa
### - spring jpa: 순수한 jpa 기반으로 spring jpa를 만든 것이다.
# QueryDSL
## 1. QueryDSL은 타입-세이프한 SQL-like 쿼리를 자바에서 사용할 수 있게 해주는 프레임워크이다.
## 2. jpa 말고 다른데서도 사용 가능하다.
## 3. spring boot 2를 현업에서 많이 쓰는데 spring boot 3에서 java와 독립선언해서 코틀린을 지원하기 시작하고
java도 지원한다.
### - spring boot2를 spring boot3로 업그레이드하면 에러가 많이 발생한다.
### - 최신 버전인 spring boot3를 쓰는 것이 좋긴 하나 현업에서는 spring boot2를 많이 쓰니 이런 상황을 알고 있어야 한다. 

## 4. jpa로 복잡한 sql문 써야 할 때 번거로우니 QueryDSL로 복잡한 sql를 작성한다.
## 5. 톰캣 실행하면 build 파일에 Q로 시작하는 클래스 만들어지는데 안만들어진다면 out폴더 확인하기
### -  build 폴더에 생성되게 할려면 grade에 build 더블 클릭한다.
## 6. sql 쿼리 쓰임새
### - 간단한 쿼리(INSERT, UPDATE, DELETE, 단순조회) -> Spring JPA
### - 조금 복잡한 쿼리 (간단한 조인, 간단한 그룹바이) -> QueryDSL
### - 완전 복잡한 쿼리 or DBMS에 종속적인 쿼리 -> JDBC 
## 7. queryDsl에서 fetchFirst()
### - 다중행 조회에서 첫번째 행을 반환한다.
## 8. @Transactional
### - 테스트 끝나면 DB에 있는 데이터 지운다.
### - 데이터 지우기 싫으면 rollback = false하면 된다.
## 9. 정렬과 페이징처리
### - 정렬
#### 1) .orderBy(idol.age.desc(), idol.idolName.desc()) 으로 사용하기
### - 페이징 처리
#### 1) 예시 sql 문
	--
	select *
	from tbl_student
	order by stu_name
	limit 10 offset 20
	--
#### 2) limit는 가져올 데이터 갯수 offset은 가져올 데이터 시작점
#### 3) offset 공식 -> int offset = (pageNo - 1) * limit; // 어디서부터 보여줄건지 (첫번째 데이터가 0번)

# sql
## 1. 계층형 질의
### - START WITH: 계층 탐색을 어디서부터 시작할지 시작점을 지정한다.
### - CONNECT BY: 부모와 자식의 관계를 어떻게 연결할지 규칙을 정의한다.
### - PRIOR: CONNECT BY 절에서 부모 행의 컬럼을 가리키는 특별한 키워드이다.
### - 계층의 깊이(단계)를 나타내는 가상 컬럼이다. (루트는 1)
