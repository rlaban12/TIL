# 2025 07 30 수업 정리
# java jpa
## 1. 고아 객체(Orphan Removal)와 CascadeType.REMOVE
### - 고아 객체(Orphan Object)란 부모 객체에 속하지 않는 자식 객체를 의미한다.
### - CascadeType.REMOVE는 부모 엔티티가 삭제될 때 연관된 자식 엔티티도 함께 삭제하는 옵션이다.
### - 잘 이해가 안되면 @OneToMany(mappedBy = "department", cascade = CascadeType.ALL, orphanRemoval = true) 외우고 쓰면 된다.
## 2. N+1 문제 및 Fetch Join
### - N + 1 문제
#### 1) sql에서는 sql문을 중복되도 한번만 작성할 것을 jpa는 sql은 중복없게 sql문을 여러번 쓰는 문제이다.
### - Fetch join
#### 1) N + 1문제를 해결하기 위해서 sql 문법에 없는 jpa의 문법이다.
#### 2) Fetch Join은 JPQL(JPA Query Language)의 JOIN FETCH 구문을 사용하여 수행된다.
#### 3) N + 1 문제 해결을 위한 fetch join 사용 예시
#### -> @Query("SELECT d FROM Department  d JOIN FETCH d.employees")
#### -> List<Department> findAllByFetch();
### - 다 대 다 관계
#### 1) N : M
#### 2) 다대다 관계는 이 관계를 1대 다와 다대 1로 풀어줄 중간테이블이 필요하다.

# sql
